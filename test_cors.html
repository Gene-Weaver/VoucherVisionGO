<!DOCTYPE html>
<html>
<head>
    <title>Minimal VoucherVision CORS Test</title>
</head>
<body>
    <h1>VoucherVision CORS Test</h1>
    <button id="testButton">Test API with URL</button>
    <pre id="results">Click the button to test...</pre>

    <script>
        document.getElementById('testButton').addEventListener('click', async function() {
            const results = document.getElementById('results');
            results.textContent = 'Testing...';

            try {
                console.log('Sending request to VoucherVision API');
                
                // This will log any preflight request details
                const response = await fetch('https://vouchervision-go-738307415303.us-central1.run.app/process-url', {
                    method: 'POST',
                    headers: {
                        'X-API-Key': 'oUxLwoODeKBBXp60VGUYovKaFSEYYobV',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        image_url: 'https://swbiodiversity.org/imglib/seinet/sernec/EKY/31234100396/31234100396116.jpg',
                        engines: ['gemini-1.5-pro']
                    })
                });

                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);

                const data = await response.text();
                console.log('Response data:', data);

                // Display results
                results.textContent = `Status: ${response.status}\n\nResponse:\n${data.substring(0, 1000)}...`;
            } catch (error) {
                console.error('Error during fetch:', error);
                results.textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>